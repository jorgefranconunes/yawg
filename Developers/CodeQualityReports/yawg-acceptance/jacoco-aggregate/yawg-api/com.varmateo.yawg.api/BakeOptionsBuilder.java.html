<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../../jacoco-resources/report.gif" type="image/gif"/><title>BakeOptionsBuilder.java</title><link rel="stylesheet" href="../../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../../index.html" class="el_report">Yawg acceptance tests</a> &gt; <a href="../index.html" class="el_bundle">yawg-api</a> &gt; <a href="index.source.html" class="el_package">com.varmateo.yawg.api</a> &gt; <span class="el_source">BakeOptionsBuilder.java</span></div><h1>BakeOptionsBuilder.java</h1><pre class="source lang-java linenums">/**************************************************************************
 *
 * Copyright (c) 2020 Yawg project contributors.
 *
 **************************************************************************/

package com.varmateo.yawg.api;

import java.nio.file.Path;
import java.util.Collections;
import java.util.HashMap;
import java.util.Map;
import java.util.Objects;
import java.util.Optional;


/**
 * Builder of {@code BakeOptions} instances.
 */
public final class BakeOptionsBuilder {


    private Optional&lt;Path&gt; _assetsDir;
    private Path _sourceDir;
    private Path _targetDir;
    private Map&lt;String, Object&gt; _externalPageVars;


    private BakeOptionsBuilder(
            final Optional&lt;Path&gt; assetsDir,
            final Path sourceDir,
            final Path targetDir,
<span class="fc" id="L33">            final Map&lt;String, Object&gt; externalPageVars) {</span>

<span class="fc" id="L35">        _assetsDir = assetsDir;</span>
<span class="fc" id="L36">        _sourceDir = sourceDir;</span>
<span class="fc" id="L37">        _targetDir = targetDir;</span>
<span class="fc" id="L38">        _externalPageVars = externalPageVars;</span>
<span class="fc" id="L39">    }</span>


    /**
     * Creates a new {@code BakeOptionsBuilder} initialized with no
     * values.
     */
    public static BakeOptionsBuilder create() {
<span class="fc" id="L47">        return new BakeOptionsBuilder(</span>
<span class="fc" id="L48">                Optional.empty(),</span>
                null,
                null,
                new HashMap&lt;&gt;());
    }


    /**
     * Creates a new {@code BakeOptionsBuilder} initialized with the
     * given data.
     */
    public static BakeOptionsBuilder create(final BakeOptions initialData) {
<span class="nc" id="L60">        return new BakeOptionsBuilder(</span>
<span class="nc" id="L61">                initialData.assetsDir(),</span>
<span class="nc" id="L62">                initialData.sourceDir(),</span>
<span class="nc" id="L63">                initialData.targetDir(),</span>
<span class="nc" id="L64">                new HashMap&lt;&gt;(initialData.externalPageVars()));</span>
    }


    /**
     * Sets the value to be returned by {@link BakeOptions#assetsDir()}.
     */
    public BakeOptionsBuilder assetsDir(final Path assetsDir) {
<span class="nc" id="L72">        _assetsDir = Optional.of(assetsDir);</span>
<span class="nc" id="L73">        return this;</span>
    }


    /**
     * Sets the value to be returned by {@link BakeOptions#assetsDir()}.
     */
    public BakeOptionsBuilder assetsDir(final Optional&lt;Path&gt; assetsDir) {
<span class="fc" id="L81">        _assetsDir = assetsDir;</span>
<span class="fc" id="L82">        return this;</span>
    }


    /**
     * Sets the value to be returned by {@link BakeOptions#sourceDir()}.
     */
    public BakeOptionsBuilder sourceDir(final Path sourceDir) {
<span class="fc" id="L90">        _sourceDir = sourceDir;</span>
<span class="fc" id="L91">        return this;</span>
    }


    /**
     * Sets the value to be returned by {@link BakeOptions#targetDir()}.
     */
    public BakeOptionsBuilder targetDir(final Path targetDir) {
<span class="fc" id="L99">        _targetDir = targetDir;</span>
<span class="fc" id="L100">        return this;</span>
    }


    /**
     * Copies all of the mappings from map to the map to be returned
     * from {@link BakeOptions#externalPageVars()}.
     */
    public BakeOptionsBuilder putAllExternalPageVars(
            final Map&lt;String, ? extends Object&gt; externalPageVars) {
<span class="fc" id="L110">        _externalPageVars.putAll(externalPageVars);</span>
<span class="fc" id="L111">        return this;</span>
    }


    /**
     * Returns a newly-created {@link BakeOptions} based on the
     * contents of this {@code BakeOptionsBuilder}.
     */
    public BakeOptions build() {
<span class="fc" id="L120">        return new BakeOptionsImpl(</span>
                _assetsDir,
                _sourceDir,
                _targetDir,
                _externalPageVars);
    }


    /**
     *
     */
    private static final class BakeOptionsImpl
            implements BakeOptions {

        private final Optional&lt;Path&gt; _assetsDir;
        private final Path _sourceDir;
        private final Path _targetDir;
        private final Map&lt;String, Object&gt; _externalPageVars;


        BakeOptionsImpl(
                final Optional&lt;Path&gt; assetsDir,
                final Path sourceDir,
                final Path targetDir,
<span class="fc" id="L144">                final Map&lt;String, Object&gt; externalPageVars) {</span>

<span class="fc" id="L146">            _assetsDir = assetsDir;</span>
<span class="fc" id="L147">            _sourceDir = Objects.requireNonNull(sourceDir);</span>
<span class="fc" id="L148">            _targetDir = Objects.requireNonNull(targetDir);</span>
<span class="fc" id="L149">            _externalPageVars = Collections.unmodifiableMap(new HashMap&lt;&gt;(externalPageVars));</span>
<span class="fc" id="L150">        }</span>


        @Override
        public Optional&lt;Path&gt; assetsDir() {
<span class="fc" id="L155">            return _assetsDir;</span>
        }


        @Override
        public Path sourceDir() {
<span class="fc" id="L161">            return _sourceDir;</span>
        }


        @Override
        public Path targetDir() {
<span class="fc" id="L167">            return _targetDir;</span>
        }


        @Override
        public Map&lt;String, Object&gt; externalPageVars() {
<span class="fc" id="L173">            return _externalPageVars;</span>
        }
    }
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.eclemma.org/jacoco">JaCoCo</a> 0.7.7.201606060606</span></div></body></html>