<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../../jacoco-resources/report.gif" type="image/gif"/><title>SiteBakerOptions_Builder.java</title><link rel="stylesheet" href="../../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../../index.html" class="el_report">Yawg acceptance tests</a> &gt; <a href="../index.html" class="el_bundle">yawg-api</a> &gt; <a href="index.source.html" class="el_package">com.varmateo.yawg.api</a> &gt; <span class="el_source">SiteBakerOptions_Builder.java</span></div><h1>SiteBakerOptions_Builder.java</h1><pre class="source lang-java linenums">// Autogenerated code. Do not modify.
package com.varmateo.yawg.api;

import java.nio.file.Path;
import java.util.Collection;
import java.util.Collections;
import java.util.EnumSet;
import java.util.LinkedHashMap;
import java.util.Map;
import java.util.Objects;
import java.util.Optional;
import java.util.function.Consumer;
import java.util.function.UnaryOperator;
import javax.annotation.Generated;

/**
 * Auto-generated superclass of {@link SiteBakerOptions.Builder}, derived from the API of {@link
 * SiteBakerOptions}.
 */
@Generated(&quot;org.inferred.freebuilder.processor.Processor&quot;)
<span class="fc" id="L21">abstract class SiteBakerOptions_Builder {</span>

  /**
   * Creates a new builder using {@code value} as a template.
   *
   * &lt;p&gt;If {@code value} is a partial, the builder will return more partials.
   */
  public static SiteBakerOptions.Builder from(SiteBakerOptions value) {
<span class="nc bnc" id="L29" title="All 2 branches missed.">    if (value instanceof Rebuildable) {</span>
<span class="nc" id="L30">      return ((Rebuildable) value).toBuilder();</span>
    } else {
<span class="nc" id="L32">      return SiteBakerOptions.builder().mergeFrom(value);</span>
    }
  }

<span class="pc" id="L36">  private enum Property {</span>
<span class="fc" id="L37">    SOURCE_DIR(&quot;sourceDir&quot;),</span>
<span class="fc" id="L38">    TARGET_DIR(&quot;targetDir&quot;),</span>
    ;

    private final String name;

<span class="fc" id="L43">    private Property(String name) {</span>
<span class="fc" id="L44">      this.name = name;</span>
<span class="fc" id="L45">    }</span>

    @Override
    public String toString() {
<span class="nc" id="L49">      return name;</span>
    }
  }

  // Store a nullable object instead of an Optional. Escape analysis then
  // allows the JVM to optimize away the Optional objects created by and
  // passed to our API.
<span class="fc" id="L56">  private Path assetsDir = null;</span>
  private Path sourceDir;
  private Path targetDir;
  // Store a nullable object instead of an Optional. Escape analysis then
  // allows the JVM to optimize away the Optional objects created by and
  // passed to our API.
<span class="fc" id="L62">  private Path templatesDir = null;</span>
<span class="fc" id="L63">  private final LinkedHashMap&lt;String, Object&gt; externalPageVars = new LinkedHashMap&lt;&gt;();</span>
<span class="fc" id="L64">  private final EnumSet&lt;Property&gt; _unsetProperties = EnumSet.allOf(Property.class);</span>

  /**
   * Sets the value to be returned by {@link SiteBakerOptions#assetsDir()}.
   *
   * @return this {@code Builder} object
   * @throws NullPointerException if {@code assetsDir} is null
   */
  public SiteBakerOptions.Builder assetsDir(Path assetsDir) {
<span class="fc" id="L73">    this.assetsDir = Objects.requireNonNull(assetsDir);</span>
<span class="fc" id="L74">    return (SiteBakerOptions.Builder) this;</span>
  }

  /**
   * Sets the value to be returned by {@link SiteBakerOptions#assetsDir()}.
   *
   * @return this {@code Builder} object
   */
  public SiteBakerOptions.Builder assetsDir(Optional&lt;? extends Path&gt; assetsDir) {
<span class="fc bfc" id="L83" title="All 2 branches covered.">    if (assetsDir.isPresent()) {</span>
<span class="fc" id="L84">      return assetsDir(assetsDir.get());</span>
    } else {
<span class="fc" id="L86">      return clearAssetsDir();</span>
    }
  }

  /**
   * Sets the value to be returned by {@link SiteBakerOptions#assetsDir()}.
   *
   * @return this {@code Builder} object
   */
  public SiteBakerOptions.Builder nullableAssetsDir(Path assetsDir) {
<span class="nc bnc" id="L96" title="All 2 branches missed.">    if (assetsDir != null) {</span>
<span class="nc" id="L97">      return assetsDir(assetsDir);</span>
    } else {
<span class="nc" id="L99">      return clearAssetsDir();</span>
    }
  }

  /**
   * If the value to be returned by {@link SiteBakerOptions#assetsDir()} is present, replaces it by
   * applying {@code mapper} to it and using the result.
   *
   * &lt;p&gt;If the result is null, clears the value.
   *
   * @return this {@code Builder} object
   * @throws NullPointerException if {@code mapper} is null
   */
  public SiteBakerOptions.Builder mapAssetsDir(UnaryOperator&lt;Path&gt; mapper) {
<span class="nc" id="L113">    return assetsDir(assetsDir().map(mapper));</span>
  }

  /**
   * Sets the value to be returned by {@link SiteBakerOptions#assetsDir()} to {@link
   * Optional#empty() Optional.empty()}.
   *
   * @return this {@code Builder} object
   */
  public SiteBakerOptions.Builder clearAssetsDir() {
<span class="fc" id="L123">    assetsDir = null;</span>
<span class="fc" id="L124">    return (SiteBakerOptions.Builder) this;</span>
  }

  /** Returns the value that will be returned by {@link SiteBakerOptions#assetsDir()}. */
  public Optional&lt;Path&gt; assetsDir() {
<span class="nc" id="L129">    return Optional.ofNullable(assetsDir);</span>
  }

  /**
   * Sets the value to be returned by {@link SiteBakerOptions#sourceDir()}.
   *
   * @return this {@code Builder} object
   * @throws NullPointerException if {@code sourceDir} is null
   */
  public SiteBakerOptions.Builder sourceDir(Path sourceDir) {
<span class="fc" id="L139">    this.sourceDir = Objects.requireNonNull(sourceDir);</span>
<span class="fc" id="L140">    _unsetProperties.remove(Property.SOURCE_DIR);</span>
<span class="fc" id="L141">    return (SiteBakerOptions.Builder) this;</span>
  }

  /**
   * Replaces the value to be returned by {@link SiteBakerOptions#sourceDir()} by applying {@code
   * mapper} to it and using the result.
   *
   * @return this {@code Builder} object
   * @throws NullPointerException if {@code mapper} is null or returns null
   * @throws IllegalStateException if the field has not been set
   */
  public SiteBakerOptions.Builder mapSourceDir(UnaryOperator&lt;Path&gt; mapper) {
<span class="nc" id="L153">    Objects.requireNonNull(mapper);</span>
<span class="nc" id="L154">    return sourceDir(mapper.apply(sourceDir()));</span>
  }

  /**
   * Returns the value that will be returned by {@link SiteBakerOptions#sourceDir()}.
   *
   * @throws IllegalStateException if the field has not been set
   */
  public Path sourceDir() {
<span class="nc bnc" id="L163" title="All 2 branches missed.">    if (_unsetProperties.contains(Property.SOURCE_DIR)) {</span>
<span class="nc" id="L164">      throw new IllegalStateException(&quot;sourceDir not set&quot;);</span>
    }
<span class="nc" id="L166">    return sourceDir;</span>
  }

  /**
   * Sets the value to be returned by {@link SiteBakerOptions#targetDir()}.
   *
   * @return this {@code Builder} object
   * @throws NullPointerException if {@code targetDir} is null
   */
  public SiteBakerOptions.Builder targetDir(Path targetDir) {
<span class="fc" id="L176">    this.targetDir = Objects.requireNonNull(targetDir);</span>
<span class="fc" id="L177">    _unsetProperties.remove(Property.TARGET_DIR);</span>
<span class="fc" id="L178">    return (SiteBakerOptions.Builder) this;</span>
  }

  /**
   * Replaces the value to be returned by {@link SiteBakerOptions#targetDir()} by applying {@code
   * mapper} to it and using the result.
   *
   * @return this {@code Builder} object
   * @throws NullPointerException if {@code mapper} is null or returns null
   * @throws IllegalStateException if the field has not been set
   */
  public SiteBakerOptions.Builder mapTargetDir(UnaryOperator&lt;Path&gt; mapper) {
<span class="nc" id="L190">    Objects.requireNonNull(mapper);</span>
<span class="nc" id="L191">    return targetDir(mapper.apply(targetDir()));</span>
  }

  /**
   * Returns the value that will be returned by {@link SiteBakerOptions#targetDir()}.
   *
   * @throws IllegalStateException if the field has not been set
   */
  public Path targetDir() {
<span class="nc bnc" id="L200" title="All 2 branches missed.">    if (_unsetProperties.contains(Property.TARGET_DIR)) {</span>
<span class="nc" id="L201">      throw new IllegalStateException(&quot;targetDir not set&quot;);</span>
    }
<span class="nc" id="L203">    return targetDir;</span>
  }

  /**
   * Sets the value to be returned by {@link SiteBakerOptions#templatesDir()}.
   *
   * @return this {@code Builder} object
   * @throws NullPointerException if {@code templatesDir} is null
   */
  public SiteBakerOptions.Builder templatesDir(Path templatesDir) {
<span class="fc" id="L213">    this.templatesDir = Objects.requireNonNull(templatesDir);</span>
<span class="fc" id="L214">    return (SiteBakerOptions.Builder) this;</span>
  }

  /**
   * Sets the value to be returned by {@link SiteBakerOptions#templatesDir()}.
   *
   * @return this {@code Builder} object
   */
  public SiteBakerOptions.Builder templatesDir(Optional&lt;? extends Path&gt; templatesDir) {
<span class="fc bfc" id="L223" title="All 2 branches covered.">    if (templatesDir.isPresent()) {</span>
<span class="fc" id="L224">      return templatesDir(templatesDir.get());</span>
    } else {
<span class="fc" id="L226">      return clearTemplatesDir();</span>
    }
  }

  /**
   * Sets the value to be returned by {@link SiteBakerOptions#templatesDir()}.
   *
   * @return this {@code Builder} object
   */
  public SiteBakerOptions.Builder nullableTemplatesDir(Path templatesDir) {
<span class="nc bnc" id="L236" title="All 2 branches missed.">    if (templatesDir != null) {</span>
<span class="nc" id="L237">      return templatesDir(templatesDir);</span>
    } else {
<span class="nc" id="L239">      return clearTemplatesDir();</span>
    }
  }

  /**
   * If the value to be returned by {@link SiteBakerOptions#templatesDir()} is present, replaces it
   * by applying {@code mapper} to it and using the result.
   *
   * &lt;p&gt;If the result is null, clears the value.
   *
   * @return this {@code Builder} object
   * @throws NullPointerException if {@code mapper} is null
   */
  public SiteBakerOptions.Builder mapTemplatesDir(UnaryOperator&lt;Path&gt; mapper) {
<span class="nc" id="L253">    return templatesDir(templatesDir().map(mapper));</span>
  }

  /**
   * Sets the value to be returned by {@link SiteBakerOptions#templatesDir()} to {@link
   * Optional#empty() Optional.empty()}.
   *
   * @return this {@code Builder} object
   */
  public SiteBakerOptions.Builder clearTemplatesDir() {
<span class="fc" id="L263">    templatesDir = null;</span>
<span class="fc" id="L264">    return (SiteBakerOptions.Builder) this;</span>
  }

  /** Returns the value that will be returned by {@link SiteBakerOptions#templatesDir()}. */
  public Optional&lt;Path&gt; templatesDir() {
<span class="nc" id="L269">    return Optional.ofNullable(templatesDir);</span>
  }

  /**
   * Associates {@code key} with {@code value} in the map to be returned from {@link
   * SiteBakerOptions#externalPageVars()}. If the map previously contained a mapping for the key,
   * the old value is replaced by the specified value.
   *
   * @return this {@code Builder} object
   * @throws NullPointerException if either {@code key} or {@code value} are null
   */
  public SiteBakerOptions.Builder putExternalPageVars(String key, Object value) {
<span class="fc" id="L281">    Objects.requireNonNull(key);</span>
<span class="fc" id="L282">    Objects.requireNonNull(value);</span>
<span class="fc" id="L283">    externalPageVars.put(key, value);</span>
<span class="fc" id="L284">    return (SiteBakerOptions.Builder) this;</span>
  }

  /**
   * Copies all of the mappings from {@code map} to the map to be returned from {@link
   * SiteBakerOptions#externalPageVars()}.
   *
   * @return this {@code Builder} object
   * @throws NullPointerException if {@code map} is null or contains a null key or value
   */
  public SiteBakerOptions.Builder putAllExternalPageVars(
      Map&lt;? extends String, ? extends Object&gt; map) {
<span class="fc bfc" id="L296" title="All 2 branches covered.">    for (Map.Entry&lt;? extends String, ? extends Object&gt; entry : map.entrySet()) {</span>
<span class="fc" id="L297">      putExternalPageVars(entry.getKey(), entry.getValue());</span>
<span class="fc" id="L298">    }</span>
<span class="fc" id="L299">    return (SiteBakerOptions.Builder) this;</span>
  }

  /**
   * Removes the mapping for {@code key} from the map to be returned from {@link
   * SiteBakerOptions#externalPageVars()}, if one is present.
   *
   * @return this {@code Builder} object
   * @throws NullPointerException if {@code key} is null
   */
  public SiteBakerOptions.Builder removeExternalPageVars(String key) {
<span class="nc" id="L310">    Objects.requireNonNull(key);</span>
<span class="nc" id="L311">    externalPageVars.remove(key);</span>
<span class="nc" id="L312">    return (SiteBakerOptions.Builder) this;</span>
  }

  /**
   * Invokes {@code mutator} with the map to be returned from {@link
   * SiteBakerOptions#externalPageVars()}.
   *
   * &lt;p&gt;This method mutates the map in-place. {@code mutator} is a void consumer, so any value
   * returned from a lambda will be ignored. Take care not to call pure functions, like {@link
   * Collection#stream()}.
   *
   * @return this {@code Builder} object
   * @throws NullPointerException if {@code mutator} is null
   */
  public SiteBakerOptions.Builder mutateExternalPageVars(
      Consumer&lt;? super Map&lt;String, Object&gt;&gt; mutator) {
    // If putExternalPageVars is overridden, this method will be updated to delegate to it
<span class="nc" id="L329">    mutator.accept(externalPageVars);</span>
<span class="nc" id="L330">    return (SiteBakerOptions.Builder) this;</span>
  }

  /**
   * Removes all of the mappings from the map to be returned from {@link
   * SiteBakerOptions#externalPageVars()}.
   *
   * @return this {@code Builder} object
   */
  public SiteBakerOptions.Builder clearExternalPageVars() {
<span class="nc" id="L340">    externalPageVars.clear();</span>
<span class="nc" id="L341">    return (SiteBakerOptions.Builder) this;</span>
  }

  /**
   * Returns an unmodifiable view of the map that will be returned by {@link
   * SiteBakerOptions#externalPageVars()}. Changes to this builder will be reflected in the view.
   */
  public Map&lt;String, Object&gt; externalPageVars() {
<span class="nc" id="L349">    return Collections.unmodifiableMap(externalPageVars);</span>
  }

  /**
   * Copies values from {@code value}, appending to collections, and skipping empty optionals.
   *
   * @return this {@code Builder} object
   */
  public SiteBakerOptions.Builder mergeFrom(SiteBakerOptions value) {
<span class="nc" id="L358">    value.assetsDir().ifPresent(this::assetsDir);</span>
<span class="nc" id="L359">    SiteBakerOptions_Builder defaults = SiteBakerOptions.builder();</span>
<span class="nc bnc" id="L360" title="All 2 branches missed.">    if (defaults._unsetProperties.contains(Property.SOURCE_DIR)</span>
<span class="nc bnc" id="L361" title="All 2 branches missed.">        || !Objects.equals(value.sourceDir(), defaults.sourceDir())) {</span>
<span class="nc" id="L362">      sourceDir(value.sourceDir());</span>
    }
<span class="nc bnc" id="L364" title="All 2 branches missed.">    if (defaults._unsetProperties.contains(Property.TARGET_DIR)</span>
<span class="nc bnc" id="L365" title="All 2 branches missed.">        || !Objects.equals(value.targetDir(), defaults.targetDir())) {</span>
<span class="nc" id="L366">      targetDir(value.targetDir());</span>
    }
<span class="nc" id="L368">    value.templatesDir().ifPresent(this::templatesDir);</span>
<span class="nc" id="L369">    putAllExternalPageVars(value.externalPageVars());</span>
<span class="nc" id="L370">    return (SiteBakerOptions.Builder) this;</span>
  }

  /**
   * Copies values from {@code template}, appending to collections, and skipping empty optionals and
   * unset properties.
   *
   * @return this {@code Builder} object
   */
  public SiteBakerOptions.Builder mergeFrom(SiteBakerOptions.Builder template) {
<span class="nc" id="L380">    template.assetsDir().ifPresent(this::assetsDir);</span>
    // Upcast to access private fields; otherwise, oddly, we get an access violation.
<span class="nc" id="L382">    SiteBakerOptions_Builder base = template;</span>
<span class="nc" id="L383">    SiteBakerOptions_Builder defaults = SiteBakerOptions.builder();</span>
<span class="nc bnc" id="L384" title="All 2 branches missed.">    if (!base._unsetProperties.contains(Property.SOURCE_DIR)</span>
<span class="nc bnc" id="L385" title="All 2 branches missed.">        &amp;&amp; (defaults._unsetProperties.contains(Property.SOURCE_DIR)</span>
<span class="nc bnc" id="L386" title="All 2 branches missed.">            || !Objects.equals(template.sourceDir(), defaults.sourceDir()))) {</span>
<span class="nc" id="L387">      sourceDir(template.sourceDir());</span>
    }
<span class="nc bnc" id="L389" title="All 2 branches missed.">    if (!base._unsetProperties.contains(Property.TARGET_DIR)</span>
<span class="nc bnc" id="L390" title="All 2 branches missed.">        &amp;&amp; (defaults._unsetProperties.contains(Property.TARGET_DIR)</span>
<span class="nc bnc" id="L391" title="All 2 branches missed.">            || !Objects.equals(template.targetDir(), defaults.targetDir()))) {</span>
<span class="nc" id="L392">      targetDir(template.targetDir());</span>
    }
<span class="nc" id="L394">    template.templatesDir().ifPresent(this::templatesDir);</span>
<span class="nc" id="L395">    putAllExternalPageVars(base.externalPageVars);</span>
<span class="nc" id="L396">    return (SiteBakerOptions.Builder) this;</span>
  }

  /**
   * Resets the state of this builder.
   *
   * @return this {@code Builder} object
   */
  public SiteBakerOptions.Builder clear() {
<span class="nc" id="L405">    SiteBakerOptions_Builder defaults = SiteBakerOptions.builder();</span>
<span class="nc" id="L406">    assetsDir = defaults.assetsDir;</span>
<span class="nc" id="L407">    sourceDir = defaults.sourceDir;</span>
<span class="nc" id="L408">    targetDir = defaults.targetDir;</span>
<span class="nc" id="L409">    templatesDir = defaults.templatesDir;</span>
<span class="nc" id="L410">    externalPageVars.clear();</span>
<span class="nc" id="L411">    _unsetProperties.clear();</span>
<span class="nc" id="L412">    _unsetProperties.addAll(defaults._unsetProperties);</span>
<span class="nc" id="L413">    return (SiteBakerOptions.Builder) this;</span>
  }

  /**
   * Returns a newly-created {@link SiteBakerOptions} based on the contents of this {@code Builder}.
   *
   * @throws IllegalStateException if any field has not been set
   */
  public SiteBakerOptions build() {
<span class="pc bpc" id="L422" title="1 of 2 branches missed.">    if (!_unsetProperties.isEmpty()) {</span>
<span class="nc" id="L423">      throw new IllegalStateException(&quot;Not set: &quot; + _unsetProperties);</span>
    }
<span class="fc" id="L425">    return new Value(this);</span>
  }

  /**
   * Returns a newly-created partial {@link SiteBakerOptions} for use in unit tests. State checking
   * will not be performed. Unset properties will throw an {@link UnsupportedOperationException}
   * when accessed via the partial object.
   *
   * &lt;p&gt;The builder returned by {@link SiteBakerOptions.Builder#from(SiteBakerOptions)} will
   * propagate the partial status of its input, overriding {@link SiteBakerOptions.Builder#build()
   * build()} to return another partial. This allows for robust tests of modify-rebuild code.
   *
   * &lt;p&gt;Partials should only ever be used in tests. They permit writing robust test cases that won't
   * fail if this type gains more application-level constraints (e.g. new required fields) in
   * future. If you require partially complete values in production code, consider using a Builder.
   */
  public SiteBakerOptions buildPartial() {
<span class="nc" id="L442">    return new Partial(this);</span>
  }

<span class="fc" id="L445">  private abstract static class Rebuildable implements SiteBakerOptions {</span>
    public abstract Builder toBuilder();
  }

  private static final class Value extends Rebuildable {
    // Store a nullable object instead of an Optional. Escape analysis then
    // allows the JVM to optimize away the Optional objects created by our
    // getter method.
    private final Path assetsDir;
    private final Path sourceDir;
    private final Path targetDir;
    // Store a nullable object instead of an Optional. Escape analysis then
    // allows the JVM to optimize away the Optional objects created by our
    // getter method.
    private final Path templatesDir;
    private final Map&lt;String, Object&gt; externalPageVars;

<span class="fc" id="L462">    private Value(SiteBakerOptions_Builder builder) {</span>
<span class="fc" id="L463">      this.assetsDir = builder.assetsDir;</span>
<span class="fc" id="L464">      this.sourceDir = builder.sourceDir;</span>
<span class="fc" id="L465">      this.targetDir = builder.targetDir;</span>
<span class="fc" id="L466">      this.templatesDir = builder.templatesDir;</span>
<span class="fc" id="L467">      this.externalPageVars = immutableMap(builder.externalPageVars);</span>
<span class="fc" id="L468">    }</span>

    @Override
    public Optional&lt;Path&gt; assetsDir() {
<span class="fc" id="L472">      return Optional.ofNullable(assetsDir);</span>
    }

    @Override
    public Path sourceDir() {
<span class="fc" id="L477">      return sourceDir;</span>
    }

    @Override
    public Path targetDir() {
<span class="fc" id="L482">      return targetDir;</span>
    }

    @Override
    public Optional&lt;Path&gt; templatesDir() {
<span class="fc" id="L487">      return Optional.ofNullable(templatesDir);</span>
    }

    @Override
    public Map&lt;String, Object&gt; externalPageVars() {
<span class="fc" id="L492">      return externalPageVars;</span>
    }

    @Override
    public Builder toBuilder() {
<span class="nc" id="L497">      SiteBakerOptions_Builder builder = SiteBakerOptions.builder();</span>
<span class="nc" id="L498">      builder.assetsDir = assetsDir;</span>
<span class="nc" id="L499">      builder.sourceDir = sourceDir;</span>
<span class="nc" id="L500">      builder.targetDir = targetDir;</span>
<span class="nc" id="L501">      builder.templatesDir = templatesDir;</span>
<span class="nc" id="L502">      builder.externalPageVars.putAll(externalPageVars);</span>
<span class="nc" id="L503">      builder._unsetProperties.clear();</span>
<span class="nc" id="L504">      return (Builder) builder;</span>
    }

    @Override
    public boolean equals(Object obj) {
<span class="nc bnc" id="L509" title="All 2 branches missed.">      if (!(obj instanceof Value)) {</span>
<span class="nc" id="L510">        return false;</span>
      }
<span class="nc" id="L512">      Value other = (Value) obj;</span>
<span class="nc bnc" id="L513" title="All 2 branches missed.">      return Objects.equals(assetsDir, other.assetsDir)</span>
<span class="nc bnc" id="L514" title="All 2 branches missed.">          &amp;&amp; Objects.equals(sourceDir, other.sourceDir)</span>
<span class="nc bnc" id="L515" title="All 2 branches missed.">          &amp;&amp; Objects.equals(targetDir, other.targetDir)</span>
<span class="nc bnc" id="L516" title="All 2 branches missed.">          &amp;&amp; Objects.equals(templatesDir, other.templatesDir)</span>
<span class="nc bnc" id="L517" title="All 2 branches missed.">          &amp;&amp; Objects.equals(externalPageVars, other.externalPageVars);</span>
    }

    @Override
    public int hashCode() {
<span class="nc" id="L522">      return Objects.hash(assetsDir, sourceDir, targetDir, templatesDir, externalPageVars);</span>
    }

    @Override
    public String toString() {
<span class="nc" id="L527">      StringBuilder result = new StringBuilder(&quot;SiteBakerOptions{&quot;);</span>
<span class="nc bnc" id="L528" title="All 2 branches missed.">      if (assetsDir != null) {</span>
<span class="nc" id="L529">        result.append(&quot;assetsDir=&quot;).append(assetsDir).append(&quot;, &quot;);</span>
      }
<span class="nc" id="L531">      result.append(&quot;sourceDir=&quot;).append(sourceDir).append(&quot;, targetDir=&quot;).append(targetDir);</span>
<span class="nc bnc" id="L532" title="All 2 branches missed.">      if (templatesDir != null) {</span>
<span class="nc" id="L533">        result.append(&quot;, templatesDir=&quot;).append(templatesDir);</span>
      }
<span class="nc" id="L535">      return result.append(&quot;, externalPageVars=&quot;).append(externalPageVars).append(&quot;}&quot;).toString();</span>
    }
  }

  private static final class Partial extends Rebuildable {
    // Store a nullable object instead of an Optional. Escape analysis then
    // allows the JVM to optimize away the Optional objects created by our
    // getter method.
    private final Path assetsDir;
    private final Path sourceDir;
    private final Path targetDir;
    // Store a nullable object instead of an Optional. Escape analysis then
    // allows the JVM to optimize away the Optional objects created by our
    // getter method.
    private final Path templatesDir;
    private final Map&lt;String, Object&gt; externalPageVars;
    private final EnumSet&lt;Property&gt; _unsetProperties;

<span class="nc" id="L553">    Partial(SiteBakerOptions_Builder builder) {</span>
<span class="nc" id="L554">      this.assetsDir = builder.assetsDir;</span>
<span class="nc" id="L555">      this.sourceDir = builder.sourceDir;</span>
<span class="nc" id="L556">      this.targetDir = builder.targetDir;</span>
<span class="nc" id="L557">      this.templatesDir = builder.templatesDir;</span>
<span class="nc" id="L558">      this.externalPageVars = immutableMap(builder.externalPageVars);</span>
<span class="nc" id="L559">      this._unsetProperties = builder._unsetProperties.clone();</span>
<span class="nc" id="L560">    }</span>

    @Override
    public Optional&lt;Path&gt; assetsDir() {
<span class="nc" id="L564">      return Optional.ofNullable(assetsDir);</span>
    }

    @Override
    public Path sourceDir() {
<span class="nc bnc" id="L569" title="All 2 branches missed.">      if (_unsetProperties.contains(Property.SOURCE_DIR)) {</span>
<span class="nc" id="L570">        throw new UnsupportedOperationException(&quot;sourceDir not set&quot;);</span>
      }
<span class="nc" id="L572">      return sourceDir;</span>
    }

    @Override
    public Path targetDir() {
<span class="nc bnc" id="L577" title="All 2 branches missed.">      if (_unsetProperties.contains(Property.TARGET_DIR)) {</span>
<span class="nc" id="L578">        throw new UnsupportedOperationException(&quot;targetDir not set&quot;);</span>
      }
<span class="nc" id="L580">      return targetDir;</span>
    }

    @Override
    public Optional&lt;Path&gt; templatesDir() {
<span class="nc" id="L585">      return Optional.ofNullable(templatesDir);</span>
    }

    @Override
    public Map&lt;String, Object&gt; externalPageVars() {
<span class="nc" id="L590">      return externalPageVars;</span>
    }

    @Override
    public Builder toBuilder() {
<span class="nc" id="L595">      throw new UnsupportedOperationException();</span>
    }

    @Override
    public boolean equals(Object obj) {
<span class="nc bnc" id="L600" title="All 2 branches missed.">      if (!(obj instanceof Partial)) {</span>
<span class="nc" id="L601">        return false;</span>
      }
<span class="nc" id="L603">      Partial other = (Partial) obj;</span>
<span class="nc bnc" id="L604" title="All 2 branches missed.">      return Objects.equals(assetsDir, other.assetsDir)</span>
<span class="nc bnc" id="L605" title="All 2 branches missed.">          &amp;&amp; Objects.equals(sourceDir, other.sourceDir)</span>
<span class="nc bnc" id="L606" title="All 2 branches missed.">          &amp;&amp; Objects.equals(targetDir, other.targetDir)</span>
<span class="nc bnc" id="L607" title="All 2 branches missed.">          &amp;&amp; Objects.equals(templatesDir, other.templatesDir)</span>
<span class="nc bnc" id="L608" title="All 2 branches missed.">          &amp;&amp; Objects.equals(externalPageVars, other.externalPageVars)</span>
<span class="nc bnc" id="L609" title="All 2 branches missed.">          &amp;&amp; Objects.equals(_unsetProperties, other._unsetProperties);</span>
    }

    @Override
    public int hashCode() {
<span class="nc" id="L614">      return Objects.hash(</span>
          assetsDir, sourceDir, targetDir, templatesDir, externalPageVars, _unsetProperties);
    }

    @Override
    public String toString() {
<span class="nc" id="L620">      StringBuilder result = new StringBuilder(&quot;partial SiteBakerOptions{&quot;);</span>
<span class="nc bnc" id="L621" title="All 2 branches missed.">      if (assetsDir != null) {</span>
<span class="nc" id="L622">        result.append(&quot;assetsDir=&quot;).append(assetsDir).append(&quot;, &quot;);</span>
      }
<span class="nc bnc" id="L624" title="All 2 branches missed.">      if (!_unsetProperties.contains(Property.SOURCE_DIR)) {</span>
<span class="nc" id="L625">        result.append(&quot;sourceDir=&quot;).append(sourceDir).append(&quot;, &quot;);</span>
      }
<span class="nc bnc" id="L627" title="All 2 branches missed.">      if (!_unsetProperties.contains(Property.TARGET_DIR)) {</span>
<span class="nc" id="L628">        result.append(&quot;targetDir=&quot;).append(targetDir).append(&quot;, &quot;);</span>
      }
<span class="nc bnc" id="L630" title="All 2 branches missed.">      if (templatesDir != null) {</span>
<span class="nc" id="L631">        result.append(&quot;templatesDir=&quot;).append(templatesDir).append(&quot;, &quot;);</span>
      }
<span class="nc" id="L633">      return result.append(&quot;externalPageVars=&quot;).append(externalPageVars).append(&quot;}&quot;).toString();</span>
    }
  }

  private static &lt;K, V&gt; Map&lt;K, V&gt; immutableMap(Map&lt;K, V&gt; entries) {
<span class="fc bfc" id="L638" title="All 3 branches covered.">    switch (entries.size()) {</span>
      case 0:
<span class="fc" id="L640">        return Collections.emptyMap();</span>
      case 1:
<span class="fc" id="L642">        Map.Entry&lt;K, V&gt; entry = entries.entrySet().iterator().next();</span>
<span class="fc" id="L643">        return Collections.singletonMap(entry.getKey(), entry.getValue());</span>
      default:
<span class="fc" id="L645">        return Collections.unmodifiableMap(new LinkedHashMap&lt;&gt;(entries));</span>
    }
  }
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.eclemma.org/jacoco">JaCoCo</a> 0.7.7.201606060606</span></div></body></html>